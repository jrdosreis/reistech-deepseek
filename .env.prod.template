# ============================================
# REISTECH - PRODUÇÃO (docker-compose.prod.yml)
# Template seguro com seu domínio REAL.
# PREENCHA todos os <...> com senhas FORTES e NUNCA reutilize as de desenvolvimento!
# ============================================

# Ambiente
NODE_ENV=production
API_PREFIX=/api
PORT=3000
LOG_LEVEL=warn
APP_NAME=ReisTech Platform
APP_VERSION=2.0.0

# Banco de Dados (PostgreSQL)
DB_HOST=postgres
DB_PORT=5432
DB_NAME=reistech
DB_USER=reistech_user
DB_PASSWORD=<SET_DB_PASSWORD>
DATABASE_URL=postgresql://reistech_user:<SET_DB_PASSWORD>@postgres:5432/reistech?sslmode=disable
DB_SSL=false
DB_POOL_MIN=2
DB_POOL_MAX=10

# Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=<SET_REDIS_PASSWORD>
REDIS_DB=0
REDIS_CACHE_DB=0
REDIS_RATE_LIMIT_DB=1
REDIS_SESSION_DB=2
REDIS_URL=redis://:<SET_REDIS_PASSWORD>@redis:6379/0

# JWT / Autenticação
JWT_SECRET=<SET_JWT_SECRET>
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=30d
JWT_REFRESH_SECRET=<SET_JWT_REFRESH_SECRET>
JWT_REFRESH_EXPIRES_IN=7d
BCRYPT_ROUNDS=12

# Admin padrão (altere em produção)
ADMIN_EMAIL=admin@reiscelulares.com.br
ADMIN_PASSWORD=<SET_ADMIN_PASSWORD>
ADMIN_NAME=Administrador

# CORS – use seus domínios reais
CORS_ORIGIN=https://app.reiscelulares.com.br,https://api.reiscelulares.com.br

# WhatsApp
WHATSAPP_SESSION_PATH=/app/whatsapp-sessions
WHATSAPP_PUPPETEER_ARGS=--no-sandbox,--disable-setuid-sandbox
WHATSAPP_MAX_CONNECTIONS=5
WHATSAPP_QR_TIMEOUT=60000
WHATSAPP_AUTH_TIMEOUT=60000
WHATSAPP_RECONNECT_DELAY=5000

# Uploads
MAX_FILE_SIZE=10485760
UPLOAD_PATH=/app/uploads
UPLOAD_DIR=/app/uploads
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document

# Rate limiting
ENABLE_RATE_LIMIT=true
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
LOGIN_RATE_LIMIT_WINDOW_MS=900000
LOGIN_RATE_LIMIT_MAX_ATTEMPTS=5
WHATSAPP_RATE_LIMIT_WINDOW_MS=60000
WHATSAPP_RATE_LIMIT_MAX_MESSAGES=30

# Logging
LOG_DIR=/app/logs
LOG_LEVEL=warn
LOG_MAX_FILES=14d
LOG_MAX_SIZE=20m
DEBUG=false

# E-mail (SMTP) – Hostinger (credenciais reais de produção devem ser outras!)
SMTP_HOST=smtp.hostinger.com
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USER=contato@reiscelulares.com.br
SMTP_PASSWORD=<SET_SMTP_PASSWORD>
SMTP_FROM="ReisTech Platform <noreply@reiscelulares.com.br>"

# Notificações (opcional)
SLACK_WEBHOOK_URL=<SET_SLACK_WEBHOOK_URL>
SLACK_CHANNEL=#alerts
SLACK_ENABLED=false
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Monitoramento / Observabilidade (opcional)
SENTRY_DSN=<SET_SENTRY_DSN>
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
NEW_RELIC_LICENSE_KEY=<SET_NEW_RELIC_LICENSE_KEY>
NEW_RELIC_APP_NAME=ReisTech Platform

# Backup (S3 ou local)
BACKUP_DIR=/var/backups/reistech
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_ENABLED=true
AWS_ACCESS_KEY_ID=<SET_AWS_ACCESS_KEY_ID>
AWS_SECRET_ACCESS_KEY=<SET_AWS_SECRET_ACCESS_KEY>
AWS_REGION=us-east-1
AWS_BACKUP_BUCKET=<SET_AWS_BACKUP_BUCKET>
CDN_URL=https://cdn.reiscelulares.com.br
CDN_BUCKET=<SET_CDN_BUCKET>

# Performance
CACHE_ENABLED=true
CACHE_DEFAULT_TTL=300
COMPRESSION_ENABLED=true
COMPRESSION_THRESHOLD=1024
CLUSTER_ENABLED=true
CLUSTER_INSTANCES=4

# WebSocket
WS_PORT=3002
WS_PATH=/socket.io
WS_PING_TIMEOUT=60000
WS_PING_INTERVAL=25000

# Healthcheck / Metrics
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Timezone
TZ=America/Sao_Paulo

# Manutenção
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="Sistema em manutenção. Voltaremos em breve."

# Frontend (build args / runtime) – use seus domínios
VITE_API_URL=https://api.reiscelulares.com.br
VITE_WS_URL=wss://api.reiscelulares.com.br
VITE_APP_NAME=ReisTech
VITE_APP_VERSION=2.0.0

# Traefik / domínios
API_DOMAIN=api.reiscelulares.com.br
WEB_DOMAIN=app.reiscelulares.com.br
ACME_EMAIL=contato@reiscelulares.com.br