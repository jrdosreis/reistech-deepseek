{
  "name": "Loja de iPhones",
  "key": "iphone_store",
  "description": "Pacote para lojas de iPhones e smartphones",
  "version": "1.0.0",
  "config": {
    "whatsapp": {
      "welcome_message": true,
      "business_hours": true
    },
    "catalogo": {
      "enabled": true,
      "type": "produtos"
    },
    "fluxos": ["venda", "assistencia_tecnica", "pos_venda"]
  },
  "textos_cms": [
    {
      "chave": "menu.principal.titulo",
      "conteudo": "ü§ñ *Bem-vindo √† nossa loja de iPhones* ü§ñ",
      "ativo": true
    },
    {
      "chave": "menu.principal.opcoes",
      "conteudo": "Escolha uma op√ß√£o:\n\n1Ô∏è‚É£ *Cat√°logo* - Ver modelos de iPhone\n2Ô∏è‚É£ *Acess√≥rios* - Capas, carregadores e mais\n3Ô∏è‚É£ *Assist√™ncia T√©cnica* - Conserto e reparos\n4Ô∏è‚É£ *Servi√ßos* - Manuten√ß√£o preventiva\n5Ô∏è‚É£ *P√≥s-venda e Garantia*\n6Ô∏è‚É£ *Falar com Atendente*\n\nDigite o n√∫mero da op√ß√£o desejada.",
      "ativo": true
    },
    {
      "chave": "catalogo.menu.titulo",
      "conteudo": "üì± *Cat√°logo de iPhones*",
      "ativo": true
    },
    {
      "chave": "catalogo.menu.opcoes",
      "conteudo": "Escolha uma categoria:\n\n1. iPhone 15 (Novo)\n2. iPhone 14 (Semi-novo)\n3. iPhone 13 (Excelente estado)\n4. Outros modelos\n5. Voltar\n\nDigite o n√∫mero da op√ß√£o desejada.",
      "ativo": true
    }
  ],
  "fluxos": {
    "venda": {
      "nome": "Fluxo de Venda",
      "descricao": "Processo de venda de iPhones",
      "estados": [
        "CATALOGO_MENU",
        "CATALOGO_LISTA_MODELOS",
        "CATALOGO_DETALHE_MODELO",
        "SIMULACAO_PARCELAMENTO",
        "COLETA_DADOS_MINIMOS_VENDA",
        "GERAR_DOSSIE_VENDA",
        "AVALIAR_ESCALONAMENTO"
      ],
      "coleta_dados": [
        {
          "campo": "modelo",
          "pergunta": "Qual modelo voc√™ tem interesse?",
          "obrigatorio": true,
          "tipo": "texto"
        },
        {
          "campo": "capacidade",
          "pergunta": "Qual capacidade de armazenamento?",
          "obrigatorio": true,
          "tipo": "opcoes",
          "opcoes": ["64GB", "128GB", "256GB", "512GB", "1TB"]
        },
        {
          "campo": "cidade",
          "pergunta": "Em qual cidade voc√™ est√°?",
          "obrigatorio": true,
          "tipo": "texto"
        },
        {
          "campo": "pagamento",
          "pergunta": "Qual forma de pagamento prefere?",
          "obrigatorio": true,
          "tipo": "opcoes",
          "opcoes": ["PIX", "Cart√£o de cr√©dito", "Boleto", "Dinheiro"]
        }
      ]
    },
    "assistencia_tecnica": {
      "nome": "Assist√™ncia T√©cnica",
      "descricao": "Triagem para conserto de iPhones",
      "estados": [
        "TECNICO_MENU",
        "TECNICO_TRIAGEM",
        "TECNICO_COLETA_DETALHES",
        "GERAR_DOSSIE_TECNICO",
        "AVALIAR_ESCALONAMENTO"
      ],
      "coleta_dados": [
        {
          "campo": "modelo",
          "pergunta": "Qual o modelo do seu iPhone?",
          "obrigatorio": true,
          "tipo": "texto"
        },
        {
          "campo": "defeito",
          "pergunta": "Qual o defeito apresentado?",
          "obrigatorio": true,
          "tipo": "texto"
        },
        {
          "campo": "queda",
          "pergunta": "O aparelho sofreu queda recentemente?",
          "obrigatorio": false,
          "tipo": "boolean"
        },
        {
          "campo": "liquido",
          "pergunta": "Teve contato com l√≠quido?",
          "obrigatorio": false,
          "tipo": "boolean"
        }
      ]
    }
  },
  "regras_escalonamento": [
    {
      "condicao": "intencao == 'HUMANO_SOLICITADO'",
      "acao": "escalonar_imediato",
      "prioridade": "alta"
    },
    {
      "condicao": "dossie_completude >= 0.8",
      "acao": "escalonar",
      "prioridade": "media"
    },
    {
      "condicao": "tempo_estado > 300",
      "acao": "escalonar",
      "prioridade": "baixa"
    }
  ],
  "template_dossie": {
    "ordenacao": [
      "cliente",
      "intencaoDetectada",
      "dadosColetados",
      "prioridade",
      "sugestaoAbordagem"
    ],
    "campos": {
      "cliente": ["telefone", "nome", "cidade"],
      "dadosColetados": ["modelo", "capacidade", "pagamento", "urgencia"]
    }
  },
  "regras_extracao": {
    "venda": {
      "cidade": "(?:mor[ao]|sou de|em)\\s+([A-Za-z√Ä-√ø\\s]+)",
      "pagamento": "(?:pagamento|forma.*pagamento|pagar)\\s+(pix|cart√£o|cartao|boleto|dinheiro)",
      "urgencia": "(?:urgente|urg√™ncia|rapido|r√°pido|hoje|amanh√£)"
    },
    "tecnico": {
      "modelo": "(?:iphone|modelo)\\s+(\\d+)",
      "defeito": "(?:nao.*liga|tela.*quebrada|bateria|n√£o.*carrega|sem.*sinal)",
      "queda": "(?:caiu|queda|derrubou)",
      "liquido": "(?:√°gua|agua|liquido|molhou)"
    },
    "posVenda": {
      "pedido": "(?:pedido|OS|ordem)\\s+([A-Z0-9-]+)",
      "problema": "(?:problema|defeito|reclama√ß√£o)\\s+(.+)",
      "garantia": "(?:garantia|garantido)"
    }
  }
}